import{h as Y,d as k,R as B,j as g,_ as b,r as y,o as u,e as i,a,t as d,i as A,w as D,b as v,k as p,p as O,q as I,l as m,v as L,x as F,F as C,m as S,y as q,z as x,s as E,c as V,T as M,g as R,A as W}from"./index.e05dc400.js";import{s as j}from"./spacex.eeae468c.js";import{g as z,a as G}from"./dataConversion.f07caa7c.js";const P=Y("launchesStore",{state:()=>({filters:{}}),actions:{updateFiltersData(e){this.filters=e}}}),H=k({components:{RouterLink:B},props:{launch:{required:!0,type:Object}},setup(e){const n=g(()=>z(e.launch.date_utc)),s=g(()=>e.launch.success?"\u2714":"\u2716");return{eventDate:n,icon:s}}});const J={class:"launch-card info-card launches__grid"},K={class:"launch-card__icon"};function Q(e,n,s,o,r,l){const t=y("router-link");return u(),i("div",J,[a("span",K,d(e.icon),1),a("span",null,d(e.launch.name),1),a("span",null,d(e.eventDate),1),a("span",null,[A(t,{to:{name:"launch",params:{id:e.launch.id}},class:"info__btn"},{default:D(()=>[v("Details")]),_:1},8,["to"])])])}const X=b(H,[["render",Q]]),Z=k({setup(){const e=G(),n=p(""),s=p(2007),o=p(e),r=p("both"),l=p("both"),t=["both","success","failure"],_=["both","with","without"],f=P(),c=O(()=>{f.updateFiltersData({search:n.value,yearFrom:s.value,yearTo:o.value,isSuccess:r.value,withCrew:l.value})});return I(()=>{c()}),{maxYear:e,search:n,yearFrom:s,yearTo:o,isSuccess:r,withCrew:l,withCrewOptions:_,isSuccessOptions:t}}});const ee={class:"launches-filters info__filters"},te=["value"],ne=["value"],se={class:"text__center"},ae=["max"],oe=a("br",{class:"main--hidden"},null,-1),re=["max"];function ce(e,n,s,o,r,l){return u(),i("div",ee,[a("label",null,[v(" Enter phrase: "),m(a("input",{class:"info__input",type:"text","onUpdate:modelValue":n[0]||(n[0]=t=>e.search=t),placeholder:"search for..."},null,512),[[L,e.search]])]),a("label",null,[v(" Success or failure: "),m(a("select",{class:"info__input","onUpdate:modelValue":n[1]||(n[1]=t=>e.isSuccess=t)},[(u(!0),i(C,null,S(e.isSuccessOptions,t=>(u(),i("option",{value:t,key:`isSuccess_${t}`},d(t),9,te))),128))],512),[[F,e.isSuccess]])]),a("label",null,[v(" With or without crew: "),m(a("select",{class:"info__input","onUpdate:modelValue":n[2]||(n[2]=t=>e.withCrew=t)},[(u(!0),i(C,null,S(e.withCrewOptions,t=>(u(),i("option",{value:t,key:`withCrew_${t}`},d(t),9,ne))),128))],512),[[F,e.withCrew]])]),a("div",se,[a("label",null,[v(" Launches from: "),m(a("input",{class:"info__input",type:"number",min:"2007",max:e.maxYear,"onUpdate:modelValue":n[3]||(n[3]=t=>e.yearFrom=t)},null,8,ae),[[L,e.yearFrom]])]),oe,a("label",null,[v(" To: "),m(a("input",{class:"info__input",type:"number",min:"2007",max:e.maxYear,"onUpdate:modelValue":n[4]||(n[4]=t=>e.yearTo=t)},null,8,re),[[L,e.yearTo]])])])])}const ue=b(Z,[["render",ce]]),ie=k({props:{pageAmount:{type:Number,required:!0}},setup(e,{emit:n}){let s=p(1);const o=t=>{t==="next"?s.value=s.value>=e.pageAmount?e.pageAmount:s.value+1:t==="prev"?s.value=s.value<=1?1:s.value-1:s.value=t,n("activePageChange",s.value)},r=t=>s.value?t<=s.value+2&&t>=s.value-2:!0,l=q(()=>e.pageAmount,()=>{s.value=1,n("activePageChange",1)});return I(()=>{l()}),{changeActiveItem:o,pageActive:s,checkIfVisible:r}}});const le={class:"pagination"},he=["onClick"];function pe(e,n,s,o,r,l){return u(),i("div",le,[a("span",{class:"pagination__item pagination__item--show",onClick:n[0]||(n[0]=t=>e.changeActiveItem("prev"))},"\u2039"),(u(!0),i(C,null,S(e.pageAmount,t=>(u(),i("span",{class:x(["pagination__item",{"pagination__item--active":t===e.pageActive,"pagination__item--show":e.checkIfVisible(t)}]),key:`page-${t}`,onClick:_=>e.changeActiveItem(t)},d(t),11,he))),128)),a("span",{class:"pagination__item pagination__item--show",onClick:n[1]||(n[1]=t=>e.changeActiveItem("next"))},"\u203A")])}const de=b(ie,[["render",pe]]),_e=k({components:{LaunchCard:X,LaunchesFilters:ue,Pagination:de},setup(){const e=p([]);(async()=>{try{const c=await j.get("v4/launches");e.value=c.data}catch(c){console.error(c)}})();const s=P(),{filters:o}=E(s),r=g(()=>o.value?e.value.length?e.value.filter(h=>{const N=`${h.name} ${h.details}`.toLocaleLowerCase().includes(o.value.search.toLowerCase()),T=parseInt(h.date_utc.split("-")[0]),U=T>=o.value.yearFrom&&T<=o.value.yearTo;let w;o.value.isSuccess==="both"?w=!0:o.value.isSuccess==="success"?w=h.success:w=!h.success;let $;return o.value.withCrew==="both"?$=!0:o.value.withCrew==="with"?$=h.crew.length:$=!h.crew.length,N&&U&&w&&$}):[]:e.value),l=g(()=>Math.ceil(r.value.length/10));let t=p(1);const _=c=>{t.value=c},f=g(()=>{if(!r.value.length)return[];const c=t.value*10-10,h=t.value*10;return r.value.slice(c,h)});return{searchedLaunches:r,pages:l,updateSearchedLaunches:_,currentSearchedLaunches:f}}});const ve={class:"launches"},me=a("h3",{class:"info__header"},"Select launches criteria",-1),fe={class:"info__paragraph text__center"},ge=a("div",{class:"launches__grid"},[a("strong",null,"Success?"),a("strong",null,"Name"),a("strong",null,"Date")],-1);function we(e,n,s,o,r,l){const t=y("launches-filters"),_=y("launch-card"),f=y("pagination");return u(),i("div",ve,[me,A(t),a("p",fe,d(e.searchedLaunches.length)+" results:",1),e.searchedLaunches.length?(u(),V(M,{name:"list",key:"launchesList",appear:"",mode:"out-in",tag:"div",class:"info__box"},{default:D(()=>[ge,(u(!0),i(C,null,S(e.currentSearchedLaunches,c=>(u(),V(_,{launch:c,key:c.id},null,8,["launch"]))),128))]),_:1})):R("",!0),m(A(f,{pageAmount:e.pages,onActivePageChange:e.updateSearchedLaunches},null,8,["pageAmount","onActivePageChange"]),[[W,e.pages>1]])])}const ke=b(_e,[["render",we]]);export{ke as default};
